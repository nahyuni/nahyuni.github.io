<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  

  
  <title>마이크로 서비스 구조 | </title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="개요마이크로서비스 아키텍처는 하나의 큰 애플리케이션을 여러 개의 작은 애플리케이션으로 쪼개어 변경과 조합이 가능하도록 만든 아키텍처를 말합니다.REST API의 일반화, 도커(Docker)와 같은 컨테이너 기술, 클라우드 컴퓨팅 환경의 발전 등에 힘입어 마이크로서비스는 좀 더 손쉽게 구현될 수 있게 되었습니다. 마이크로서비스 아키텍처는 언제 필요한가? 애플">
<meta property="og:type" content="article">
<meta property="og:title" content="마이크로 서비스 구조">
<meta property="og:url" content="http://yoursite.com/2020/02/24/dev-microservice-struct/index.html">
<meta property="og:site_name" content="">
<meta property="og:description" content="개요마이크로서비스 아키텍처는 하나의 큰 애플리케이션을 여러 개의 작은 애플리케이션으로 쪼개어 변경과 조합이 가능하도록 만든 아키텍처를 말합니다.REST API의 일반화, 도커(Docker)와 같은 컨테이너 기술, 클라우드 컴퓨팅 환경의 발전 등에 힘입어 마이크로서비스는 좀 더 손쉽게 구현될 수 있게 되었습니다. 마이크로서비스 아키텍처는 언제 필요한가? 애플">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="http://yoursite.com/images/1.png">
<meta property="og:image" content="http://yoursite.com/images/2.png">
<meta property="article:published_time" content="2020-02-24T05:30:19.000Z">
<meta property="article:modified_time" content="2021-09-02T14:37:32.987Z">
<meta property="article:author" content="nahyuni21(Park.S.H)">
<meta property="article:tag" content="microservice">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://yoursite.com/images/1.png">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  
<link rel="stylesheet" href="/css/style.css">

<meta name="generator" content="Hexo 4.2.1"><link rel="alternate" href="/atom.xml" title="" type="application/atom+xml">
</head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo"></a>
      </h1>
      
        <h2 id="subtitle-wrap">
          <a href="/" id="subtitle">나 혀니의 블로그 입니다.~~</a>
        </h2>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
          <a class="main-nav-link" href="/about">About</a>
        
      </nav>
      <nav id="sub-nav">
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://yoursite.com"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main"><article id="post-dev-microservice-struct" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2020/02/24/dev-microservice-struct/" class="article-date">
  <time datetime="2020-02-24T05:30:19.000Z" itemprop="datePublished">2020-02-24</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/%EA%B0%9C%EB%B0%9C/">개발</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      마이크로 서비스 구조
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="개요"><a href="#개요" class="headerlink" title="개요"></a>개요</h2><p>마이크로서비스 아키텍처는 하나의 큰 애플리케이션을 여러 개의 작은 애플리케이션으로 쪼개어 변경과 조합이 가능하도록 만든 아키텍처를 말합니다.<br>REST API의 일반화, 도커(Docker)와 같은 컨테이너 기술, 클라우드 컴퓨팅 환경의 발전 등에 힘입어 마이크로서비스는 좀 더 손쉽게 구현될 수 있게 되었습니다.</p>
<h2 id="마이크로서비스-아키텍처는-언제-필요한가"><a href="#마이크로서비스-아키텍처는-언제-필요한가" class="headerlink" title="마이크로서비스 아키텍처는 언제 필요한가?"></a>마이크로서비스 아키텍처는 언제 필요한가?</h2><ul>
<li>애플리케이션의 배포에 한 시간 이상 소요된다.</li>
<li>단순한 기능 하나를 수정해도 전체 기능에 대한 QA가 필요하다.</li>
<li>단순한 버그 수정이 더 중대한 버그를 생산하는 일이 많아졌다.</li>
<li>현재의 애플리케이션을 기능별로 나눈다고 가정했을 때 수십개의 마이크로서비스가 가능하다.<a id="more"></a> 
<h2 id="모놀리틱-아키텍처-MONOLITHIC-ARCHITECTURE"><a href="#모놀리틱-아키텍처-MONOLITHIC-ARCHITECTURE" class="headerlink" title="모놀리틱 아키텍처 (MONOLITHIC ARCHITECTURE)"></a>모놀리틱 아키텍처 (MONOLITHIC ARCHITECTURE)</h2><img src="/images/1.png" alt=""></li>
<li>일반적인 서비스 구조<br>

</li>
</ul>
<h2 id="마이크로서비스-아키텍처"><a href="#마이크로서비스-아키텍처" class="headerlink" title="마이크로서비스 아키텍처"></a>마이크로서비스 아키텍처</h2><p><img src="/images/2.png" alt=""></p>
<ul>
<li><p>하나의 큰 서비스를 독립적인 역할을 수행하는 작은 단위의 서비스로 분리하여 설계하는 패턴</p>
</li>
<li><p>여기에서 말하는 독립적인 역할이란 주로, ‘사용자 관리’, ‘주문 관리’, ‘결제 관리’, ‘알림 관리’와 같이 기능적인 요소를 의미</p>
</li>
<li><p>서비스별로 별도의 데이터베이스를 사용</p>
</li>
<li><p>데이터의 특성과 서비스가 가지는 특수성에 따라 가장 효율적인 데이터베이스를 선택 설계 가능.</p>
<br>
## 마이크로서비스 아키텍처에서의 요청 처리
![](/images/6.png)
</li>
<li><p>클라이언트가 모든 마이크로서비스의 호스트명은 물론 end_point를 알고 있어야 한다.</p>
</li>
</ul>
<h3 id="API-GATEWAY"><a href="#API-GATEWAY" class="headerlink" title="API GATEWAY"></a>API GATEWAY</h3><ul>
<li><p>API Gateway는 시스템의 아키텍처를 내부로 숨기고 외부의 요청에 대한 응답만을 적합한 형태로 응답 함.</p>
</li>
<li><p>API Gateway는 이처럼 클라이언트의 요청을 일괄적으로 처리하는 역할 뿐만 아니라, 전체 시스템의 부하를 분산시키는 로드 밸런서의 역할, 동일한 요청에 대한 불필요한 반복작업을 줄일 수 있는 캐싱, 시스템상을 오고가는 요청과 응답에 대한 모니터링 역할도 수행할 수 있습니다.</p>
</li>
<li><p>시스템 내부의 아키텍처를 숨길 수 있는(encapsulate) 특성이 API Gateway가 갖는 가장 큰 장점</p>
</li>
</ul>
<h2 id="API-GATEWAY-구현시-고려해야할-점들"><a href="#API-GATEWAY-구현시-고려해야할-점들" class="headerlink" title="API GATEWAY 구현시 고려해야할 점들"></a>API GATEWAY 구현시 고려해야할 점들</h2><ul>
<li>API Gateway를 비동기(asynchronous)적이고 non-blocking I/O 처리가 가능하도록 구현됨.</li>
<li>개별 마이크로서비스로 보내는 요청의 선후관계가 존재(자바스크립트의 Promise 등으로 구현 가능)</li>
<li>분산된 서버의 상태와 여러가지 변수들로 인해서 일부 서비스에 장애가 발생하거나 응답속도가 지연될 가능성이 높아지게 됨.</li>
<li>특정서비스에 문제가 발생했을 때 API Gateway는 서비스 장애의 종류에 따라 적절한 처리가 가능하도록 설계/구현 되어야 함.</li>
<li>API Gateway는 모든 요청이 몰리는 지점이기 때문에 동일한 요청에 대하여 중복적으로 마이크로서비스에 요청을 보내는 것 보다 기존의 결과를 캐싱하여 재활용할 수 있도록 설계하는 것이 중요<br>

</li>
</ul>
<h2 id="프로세스간-통신-IPC-inter-process-communication"><a href="#프로세스간-통신-IPC-inter-process-communication" class="headerlink" title="프로세스간 통신 IPC(inter-process communication)"></a>프로세스간 통신 IPC(inter-process communication)</h2><ul>
<li>동기 메시지 기반 통신<br>동기 요청/응답 기반 : REST, Apache Thrift</li>
<li>비동기 메시지 기반 통신<br>메시지를 전송하는 표준 프로토콜은 AMQP 와 STOMP가 있습니다. 그리고 오픈소스 메시징 시스템에는 RabbitMQ, Apache Kafka, Apache ActiveMQ, NSQ 등이 있습니다.</li>
</ul>
<br>

<h2 id="메시지-포맷"><a href="#메시지-포맷" class="headerlink" title="메시지 포맷"></a>메시지 포맷</h2><p>통신 방식을 골랐다면 메시지를 어떤 포맷으로 보낼지 골라야 합니다.</p>
<p>먼저 사람이 읽기 쉽고 이해할 수 있는 XML 과 JSON 이 있습니다. XML 은 XML 스키마로 구조를 정의할 수가 있어서 데이터를 쉽게 검증할 수 있지만 메시지 사이즈가 너무 커집니다. JSON 은 XML 보다 가볍지만 데이터를 검증하기가 쉽지 않았습니다. 그래서 JSON 에서도 XML 처럼 데이터를 검증할 수 있도록 만든 것이 JSON 스키마 입니다.</p>
<p>이런 텍스트 기반 메시지는 텍스트를 파싱하는데 오버헤드가 생깁니다. 따라서 성능을 위해 바이너리 값으로 전송하는 방법도 있습니다. 많이 쓰이는 것으로는 binary Thrift 나 Protocol Buffers, Apache Avro. 등이 있습니다.</p>
<h2 id="참조"><a href="#참조" class="headerlink" title="참조"></a>참조</h2><p><a href="https://futurecreator.github.io/2018/09/14/what-is-microservices-architecture/" target="_blank" rel="noopener">https://futurecreator.github.io/2018/09/14/what-is-microservices-architecture/</a><br><a href="http://guruble.com/%eb%a7%88%ec%9d%b4%ed%81%ac%eb%a1%9c%ec%84%9c%eb%b9%84%ec%8a%a4microservice-%ec%95%84%ed%82%a4%ed%85%8d%ec%b2%98-%ea%b7%b8%ea%b2%83%ec%9d%b4-%eb%ad%a3%ec%9d%b4-%ec%a4%91%ed%97%8c%eb%94%94/" target="_blank" rel="noopener">http://guruble.com/%eb%a7%88%ec%9d%b4%ed%81%ac%eb%a1%9c%ec%84%9c%eb%b9%84%ec%8a%a4microservice-%ec%95%84%ed%82%a4%ed%85%8d%ec%b2%98-%ea%b7%b8%ea%b2%83%ec%9d%b4-%eb%ad%a3%ec%9d%b4-%ec%a4%91%ed%97%8c%eb%94%94/</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2020/02/24/dev-microservice-struct/" data-id="cl87cgdam0004v8v21sjn5zf4" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/microservice/" rel="tag">microservice</a></li></ul>

    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2020/03/31/dev-microservice/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Newer</strong>
      <div class="article-nav-title">
        
          마이크로 서비스 활용
        
      </div>
    </a>
  
  
    <a href="/2020/02/21/project-avalon/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">avalon nano miner</div>
    </a>
  
</nav>

  
</article>

</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Categories</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/%EA%B0%9C%EB%B0%9C/">개발</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%EC%98%81%EC%96%B4/">영어</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%EC%A0%95%EB%B3%B4-%EA%B4%80%EB%A6%AC-%EA%B8%B0%EC%88%A0%EC%82%AC/">정보 관리 기술사</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%ED%94%84%EB%A1%9C%EC%A0%9D%ED%8A%B8/">프로젝트</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list" itemprop="keywords"><li class="tag-list-item"><a class="tag-list-link" href="/tags/300-%EB%AC%B8%EC%9E%A5/" rel="tag">300 문장</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/aws/" rel="tag">aws</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/blockchain/" rel="tag">blockchain</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/cron/" rel="tag">cron</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/game-svr/" rel="tag">game svr</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/gamelift/" rel="tag">gamelift</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/infra/" rel="tag">infra</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/microservice/" rel="tag">microservice</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/mining/" rel="tag">mining</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/pow/" rel="tag">pow</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/shell/" rel="tag">shell</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/streaming/" rel="tag">streaming</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/svn/" rel="tag">svn</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/yolov5/" rel="tag">yolov5</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%EC%A0%9C%EC%8B%9C%EC%B9%B4/" rel="tag">제시카</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/300-%EB%AC%B8%EC%9E%A5/" style="font-size: 10px;">300 문장</a> <a href="/tags/aws/" style="font-size: 10px;">aws</a> <a href="/tags/blockchain/" style="font-size: 10px;">blockchain</a> <a href="/tags/cron/" style="font-size: 10px;">cron</a> <a href="/tags/game-svr/" style="font-size: 15px;">game svr</a> <a href="/tags/gamelift/" style="font-size: 10px;">gamelift</a> <a href="/tags/infra/" style="font-size: 10px;">infra</a> <a href="/tags/microservice/" style="font-size: 20px;">microservice</a> <a href="/tags/mining/" style="font-size: 10px;">mining</a> <a href="/tags/pow/" style="font-size: 10px;">pow</a> <a href="/tags/shell/" style="font-size: 10px;">shell</a> <a href="/tags/streaming/" style="font-size: 10px;">streaming</a> <a href="/tags/svn/" style="font-size: 10px;">svn</a> <a href="/tags/yolov5/" style="font-size: 10px;">yolov5</a> <a href="/tags/%EC%A0%9C%EC%8B%9C%EC%B9%B4/" style="font-size: 10px;">제시카</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/10/">October 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/09/">September 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/06/">June 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/04/">April 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/03/">March 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/02/">February 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/01/">January 2020</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2021/10/08/dev-smartBBox/">smart black box 2</a>
          </li>
        
          <li>
            <a href="/2020/09/24/dev-idc-infra/">고가용인프라</a>
          </li>
        
          <li>
            <a href="/2020/06/24/dev-streaminig/">streaming 기술 이해</a>
          </li>
        
          <li>
            <a href="/2020/04/27/dev-ms-docker/">docker</a>
          </li>
        
          <li>
            <a href="/2020/04/14/dev-ms-consul/">consul</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2023 nahyuni21(Park.S.H)<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
    <a href="/about" class="mobile-nav-link">About</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  
<link rel="stylesheet" href="/fancybox/jquery.fancybox.css">

  
<script src="/fancybox/jquery.fancybox.pack.js"></script>




<script src="/js/script.js"></script>




  </div>
</body>
</html>